<UserControl x:Class="BrowserSelector.Pages.HomePage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="clr-namespace:BrowserSelector.Controls"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800"
             Background="#FAFAFA">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/LinkRouter;component/Themes/Windows11Theme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="24,32,40,32" MaxWidth="800">

            <!-- Page Title -->
            <TextBlock Text="Home"
                       Style="{StaticResource Title3TextStyle}"
                       Margin="0,0,0,16"/>

            <!-- Default Browser Section -->
            <TextBlock Text="Default Browser"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <!-- Default Browser Card -->
            <Border Style="{StaticResource SettingsCardStyle}" Padding="16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Width="36" Height="36" Background="#F6F6F6" CornerRadius="4" Margin="0,0,16,0">
                        <Path Data="{StaticResource BrowserIcon}"
                              Stroke="#5D5D5D"
                              StrokeThickness="1.5"
                              Width="18" Height="18"
                              Stretch="Uniform"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="Default Browser" Style="{StaticResource BodyTextStyle}"/>
                        <TextBlock Text="Used when no rules match the URL"
                                   Style="{StaticResource CaptionTextStyle}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>

                    <ComboBox x:Name="DefaultBrowserComboBox"
                              Grid.Column="2"
                              Style="{StaticResource ComboBoxStyle}"
                              Width="200"
                              VerticalAlignment="Center"
                              SelectionChanged="DefaultBrowserComboBox_SelectionChanged">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </Grid>
            </Border>

            <!-- Quick Stats Section -->
            <TextBlock Text="Quick Stats"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <Grid Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- URL Rules Stat -->
                <Border Grid.Column="0" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="RulesCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#0078D4"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="URL Rules"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- URL Groups Stat -->
                <Border Grid.Column="2" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="GroupsCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#107C10"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="URL Groups"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Browsers Stat -->
                <Border Grid.Column="4" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="BrowsersCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#797519"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Browsers"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Registration Status Section -->
            <TextBlock Text="Registration Status"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <Border x:Name="RegistrationCard" Style="{StaticResource SettingsCardStyle}" Padding="16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Status Icon -->
                    <Border Grid.Column="0"
                            Width="36" Height="36"
                            CornerRadius="4"
                            Margin="0,0,16,0">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Setter Property="Background" Value="#DFF6DD"/>
                            </Style>
                        </Border.Style>
                        <Path x:Name="RegistrationIcon"
                              Data="{StaticResource CheckIcon}"
                              Stroke="#107C10"
                              StrokeThickness="2"
                              Width="16" Height="16"
                              Stretch="Uniform"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                    </Border>

                    <!-- Status Text -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock x:Name="RegistrationStatusText"
                                   Text="Registered"
                                   Style="{StaticResource BodyStrongTextStyle}"/>
                        <TextBlock x:Name="RegistrationDetailText"
                                   Text="LinkRouter is set up and ready to use"
                                   Style="{StaticResource CaptionTextStyle}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>

                    <!-- Action Button -->
                    <Button x:Name="OpenSettingsButton"
                            Grid.Column="2"
                            Content="Open Windows Settings"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Click="OpenWindowsSettings_Click"
                            VerticalAlignment="Center"/>
                </Grid>
            </Border>

            <!-- Quick Actions Section -->
            <TextBlock Text="Quick Actions"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <controls:SettingsCard Header="Manage Rules"
                                   Description="Add, edit, or delete URL routing rules"
                                   IsClickable="True"
                                   Click="ManageRules_Click">
                <controls:SettingsCard.Icon>
                    <Path Data="{StaticResource RulesIcon}"
                          Stroke="#5D5D5D"
                          StrokeThickness="1.5"
                          Width="18" Height="18"
                          Stretch="Uniform"/>
                </controls:SettingsCard.Icon>
                <controls:SettingsCard.ActionContent>
                    <Path Data="{StaticResource ChevronRightIcon}"
                          Stroke="#8A8A8A"
                          StrokeThickness="1.5"
                          Width="12" Height="12"
                          Stretch="Uniform"/>
                </controls:SettingsCard.ActionContent>
            </controls:SettingsCard>

            <controls:SettingsCard Header="Test All Rules"
                                   Description="Run automation tests on your URL rules"
                                   IsClickable="True"
                                   Click="TestAllRules_Click">
                <controls:SettingsCard.Icon>
                    <TextBlock Text="&#x1F9EA;" FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                </controls:SettingsCard.Icon>
                <controls:SettingsCard.ActionContent>
                    <Path Data="{StaticResource ChevronRightIcon}"
                          Stroke="#8A8A8A"
                          StrokeThickness="1.5"
                          Width="12" Height="12"
                          Stretch="Uniform"/>
                </controls:SettingsCard.ActionContent>
            </controls:SettingsCard>

        </StackPanel>
    </ScrollViewer>
</UserControl>
