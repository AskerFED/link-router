<UserControl x:Class="BrowserSelector.Pages.HomePage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="clr-namespace:BrowserSelector.Controls"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800"
             Background="#FAFAFA">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/LinkRouter;component/Themes/Windows11Theme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="24,32,40,32" MaxWidth="800">

            <!-- Page Title -->
            <TextBlock Text="Home"
                       Style="{StaticResource Title3TextStyle}"
                       Margin="0,0,0,16"/>

            <!-- Fallback Browser Section -->
            <TextBlock Text="Fallback Browser"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <!-- Default Browser Card -->
            <Border Style="{StaticResource SettingsCardStyle}" Padding="16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Width="36" Height="36" Background="#F6F6F6" CornerRadius="4" Margin="0,0,16,0">
                        <TextBlock Text="&#xE774;"
                                   FontFamily="{StaticResource SegoeFluentIcons}"
                                   FontSize="18"
                                   Foreground="#5D5D5D"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="Fallback Browser" Style="{StaticResource BodyTextStyle}"/>
                        <TextBlock Text="Used when no rules match the URL"
                                   Style="{StaticResource CaptionTextStyle}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>

                    <ComboBox x:Name="DefaultBrowserComboBox"
                              Grid.Column="2"
                              Style="{StaticResource ComboBoxStyle}"
                              Width="200"
                              VerticalAlignment="Center"
                              SelectionChanged="DefaultBrowserComboBox_SelectionChanged">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Grid Width="16" Height="16" Margin="0,0,8,0" VerticalAlignment="Center">
                                        <Image Source="{Binding Icon}" Width="16" Height="16"
                                               Visibility="{Binding Icon, Converter={StaticResource NullToCollapsedConverter}}"
                                               RenderOptions.BitmapScalingMode="HighQuality"/>
                                        <Ellipse Width="14" Height="14" Fill="{Binding Color}"
                                                 Visibility="{Binding Icon, Converter={StaticResource NullToVisibleConverter}}"/>
                                    </Grid>
                                    <TextBlock Text="{Binding Name}" VerticalAlignment="Center"/>
                                </StackPanel>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </Grid>
            </Border>

            <!-- Individual Rules Stats Section -->
            <TextBlock Text="Individual Rules"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <Grid Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Total Rules Stat -->
                <Border Grid.Column="0" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="RulesCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#0078D4"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Total"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Enabled Rules Stat -->
                <Border Grid.Column="2" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="EnabledRulesCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#107C10"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Enabled"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Disabled Rules Stat -->
                <Border Grid.Column="4" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="DisabledRulesCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#CA8500"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Disabled"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- URL Groups Stats Section -->
            <TextBlock Text="URL Groups"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <Grid Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Total Groups Stat -->
                <Border Grid.Column="0" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="GroupsCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#0078D4"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Total"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Enabled Groups Stat -->
                <Border Grid.Column="2" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="EnabledGroupsCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#107C10"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Enabled"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Disabled Groups Stat -->
                <Border Grid.Column="4" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="DisabledGroupsCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#CA8500"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Disabled"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Browsers Stats Section -->
            <TextBlock Text="Browsers"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <Grid Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="2*"/>
                </Grid.ColumnDefinitions>

                <!-- Browsers Stat -->
                <Border Grid.Column="0" Style="{StaticResource StatCardStyle}">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock x:Name="BrowsersCountText"
                                   Text="0"
                                   FontSize="32"
                                   FontWeight="SemiBold"
                                   Foreground="#797519"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Installed"
                                   Style="{StaticResource CaptionTextStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Quick Actions Section -->
            <TextBlock Text="Quick Actions"
                       Style="{StaticResource SectionHeaderStyle}"/>

            <controls:SettingsCard Header="Manage Rules"
                                   Description="Add, edit, or delete URL routing rules"
                                   IsClickable="True"
                                   Click="ManageRules_Click">
                <controls:SettingsCard.Icon>
                    <TextBlock Text="&#xE8FD;"
                               FontFamily="{StaticResource SegoeFluentIcons}"
                               FontSize="18"
                               Foreground="#5D5D5D"/>
                </controls:SettingsCard.Icon>
                <controls:SettingsCard.ActionContent>
                    <TextBlock Text="&#xE76C;"
                               FontFamily="{StaticResource SegoeFluentIcons}"
                               FontSize="12"
                               Foreground="#8A8A8A"/>
                </controls:SettingsCard.ActionContent>
            </controls:SettingsCard>

            <controls:SettingsCard x:Name="TestAllRulesCard"
                                   Header="Test All Rules"
                                   Description="Run automation tests on your URL rules"
                                   IsClickable="True"
                                   Click="TestAllRules_Click">
                <controls:SettingsCard.Icon>
                    <TextBlock Text="&#xE714;"
                               FontFamily="{StaticResource SegoeFluentIcons}"
                               FontSize="18"
                               Foreground="#5D5D5D"/>
                </controls:SettingsCard.Icon>
                <controls:SettingsCard.ActionContent>
                    <TextBlock Text="&#xE76C;"
                               FontFamily="{StaticResource SegoeFluentIcons}"
                               FontSize="12"
                               Foreground="#8A8A8A"/>
                </controls:SettingsCard.ActionContent>
            </controls:SettingsCard>

        </StackPanel>
    </ScrollViewer>
</UserControl>
